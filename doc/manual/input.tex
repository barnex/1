\section{Running}

\subsection{Launching the program}

To run \prog, type the following code in a terminal:

\shell{\prog \textit{arguments} \textit{input.in}}

Where \textit{\file{input.in}} is the name of the input file to run. It does not necessarily have to end with ``\file{.in}'' but we use this convention throughout this manual. The \textit{\cmd{arguments}} are optinal and described further on. 

\paragraph{Arguments} In the above code, \cmd{\textit{arguments}} should be replaced by an (optional) list of \idx{command line arguments}. Arguments start with a dash (``-'') and should always come \emph{before} the input file. They are only meant for fine-tuning the program's behavior and may usually be omitted. These are the possibilities:

\begin{enumerate}
 \item [\idxcmd{-cpu}] Run on the CPU instead of the GPU.
 \item [\idxcmd{-gpu=N}] Run on GPU number ``N'' when multiple GPUs are present. Default value is ``0'', the first GPU.
 \item [\idxcmd{-silent}] Do not print output to the screen (only to output.log)
 \item [\idxcmd{-updatedisp=N}] Update the ``live'' progress output every N milliseconds
 \item [\idxcmd{-daemon}] Run in deamon mode, see \ref{daemon}
 \item [\idxcmd{-watch=N}] When running in deamon mode, check for new input files every ``N'' seconds. See \ref{daemon}.
\end{enumerate}


\subsection{Input file}

A \prog input file specifies an entire simulation, including which output should be saved. Each file contains a series of \idx{commands} which are executed in the order they are provided. Let us start with a simple example:


\begin{verbatim}
# material
msat       	800e3 
aexch      	1.3e-11
alpha      	0.02

# geometry 
gridsize 	1     32          128    
cellsize   	3E-9  3.90625E-9  3.90625E-9

# initial magnetization
uniform		1 1 1

# run
autosave	table	ascii	10E-12
run          	1E-9
\end{verbatim}

\newcommand{\defcommand}[2][\space]{\textbf{#2}\index{#2}\label{#2} \textit{#1}}
\newcommand{\command}[1]{\hyperref[#1]{\textbf{#1}}\index{#1}\label{#1}}

\paragraph{Comments} All text after a hashmark (\#) is considered a \idx{comment} and is ignored by the simulation. In the above example, the statements \cmd{\# material}, \cmd{\# geometry}, \ldots are thus comments. They are only included for clarity and could be omitted.

\paragraph{Commands} All the other text in the input file is treated as a series of \idx{commands} that are executed in the order they are specified. In general, the order of the commands matters but should be easy to deduce.  E.g., you can not call \command{run} to start the time evolution when you have not first specified the material parameters, simulation size, etc\ldots. On the other hand, after having {run} the simulation for some time, you \emph{can} change the material parameters and call commands like \command{run} again. Either way, the program will tell you if can not run a certain command yet because some parameters should be set first. A list of commands is found below.

\subsubsection*{Material parameters}
\begin{tabular}{ll}
\defcommand[value]{msat}  & Sets the saturation magnetization to the value specified in A/m. \\
\defcommand[value]{aexch} & Sets the exchange constant to the value specified in J/m. \\
\defcommand[value]{alpha} & Sets the damping coefficient.
\end{tabular}

\subsubsection*{Part size}
To define the magnet size, you must specify \emph{exactly two} of the three values below.\\

\begin{tabular}{ll}
\defcommand[x y z]{partsize}  & Sets the size of the magnet, specified in m. \\
\defcommand[x y z]{cellsize}  & Sets the size of the finite difference cells, in m. \\
\defcommand[$N_x$ $N_y$ $N_z$]{gridsize} & Sets the number of finite difference cells.
\end{tabular}\\
\bigskip

After having set two of these values, the remaining one is calculated automatically. E.g. the part size and cell size automatically fix the number of cells.

\subsubsection*{Initial state}
\begin{tabular}{ll}
\defcommand[$m_x$ $m_y$ $m_z$]{uniform}  & Initializes the magnetization to a uniform state.
\end{tabular}

\subsubsection*{Scheduled output}
\begin{tabular}{ll}
\end{tabular}




\subsection{Output}


Upon running an input file, an \idx{output directory} with a corresponding name but ending with ``\file{.out}'' will be created to store the simulation output. It also contains a file \idxfile{output.log} that keeps a log of all the output that appeared on the screen.  


\subsection{Program arguments}\label{arguments}

To obtain a list of program arguments, run \prog \cmd{-help}.
